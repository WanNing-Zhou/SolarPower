import{d as x,u as M,r as f,b as n,o as s,i,f as r,e,a as t,j as D,E as H,p as O,h as R,_ as k,k as E,l as F,m as P,F as C,n as S,q as T,c as $,t as B,g as U}from"./index-885010f6.js";import{_ as j}from"./UpdatePassword.vue_vue_type_script_setup_true_lang-455b1c65.js";import{g as q}from"./user-6c997152.js";import{g as z}from"./findDataUtils-7343f3bc.js";import{g as G}from"./suer-a4f6e5f0.js";const I=l=>(O("data-v-1f1e4692"),l=l(),R(),l),J={class:"header"},K=I(()=>r("div",{class:"left"},"分布式光伏电站发电异常管理系统",-1)),Q=I(()=>r("div",null,"操作",-1)),W={key:0,class:"option-box"},X=x({__name:"HeaderLaout",setup(l){M();const c=f(!1),_=f(!1),o=()=>{_.value=!0},d=async()=>{(await d()).code==200&&H.success("登出成功")};return(p,a)=>{const v=n("el-menu-item"),w=n("el-menu");return s(),i("div",J,[K,r("div",{class:"right",onClick:a[0]||(a[0]=u=>c.value=!c.value)},[Q,c.value?(s(),i("div",W,[e(w,null,{default:t(()=>[e(v,null,{default:t(()=>[r("div",{onClick:o},"修改密码")]),_:1}),e(v,null,{default:t(()=>[r("div",{onClick:d},"登出")]),_:1})]),_:1})])):D("",!0)]),e(j,{visible:_.value,"onUpdate:visible":a[1]||(a[1]=u=>_.value=u)},null,8,["visible"])])}}});const Y=k(X,[["__scopeId","data-v-1f1e4692"]]),Z={class:"side-layout"},ee=x({__name:"SideLayout",setup(l){const c=E(),_=f(),o=f([]),d=F(()=>o.value.length?"point_"+o.value[0].children[0].id:null),p=M(),a=async()=>{const y=(await q()).data.permission.stationIds,L=await G();let h=z(y,L.data);if(o.value=h,!h.length){H.warning("当前角色无访问权限,请联系管理员添加");return}T(()=>{const m=o.value[0].children[0];_.value.open("comp_"+o.value[0].id),p.replace("/datashow/"+m.id+"/"+m.label)})};P(()=>{a()});const v=(u,y)=>{},w=(u,y)=>{c.commit("setcompanyNumber",u)};return(u,y)=>{const L=n("OfficeBuilding"),h=n("el-icon"),m=n("el-menu-item"),A=n("router-link"),N=n("el-sub-menu"),V=n("el-menu");return s(),i("div",Z,[e(V,{ref_key:"menuRef",ref:_,collapse:!1,"background-color":"#0B2D4D","text-color":"#6D8AA6","active-text-color":"#ffd04b",onOpen:v,onClose:w,"default-active":d.value},{default:t(()=>[(s(!0),i(C,null,S(o.value,g=>(s(),$(N,{index:"comp_"+g.id},{title:t(()=>[e(m,{index:"comp_"+g.id},{default:t(()=>[e(h,null,{default:t(()=>[e(L)]),_:1}),r("div",null,B(g.label),1)]),_:2},1032,["index"])]),default:t(()=>[(s(!0),i(C,null,S(g.children,b=>(s(),$(m,{index:"point_"+b.id},{default:t(()=>[e(A,{class:"menu-item",to:"/datashow/"+b.id+"/"+b.label},{default:t(()=>[U(B(b.label),1)]),_:2},1032,["to"])]),_:2},1032,["index"]))),256))]),_:2},1032,["index"]))),256))]),_:1},8,["default-active"])])}}});const te=k(ee,[["__scopeId","data-v-6f4c9b90"]]),ne={class:"main-layout"},oe=x({__name:"MainLayout",setup(l){return f(window.innerHeight-80),(c,_)=>{const o=n("router-view");return s(),i("div",ne,[e(o)])}}});const ae=k(oe,[["__scopeId","data-v-bd976b38"]]),se={class:"common-layout"},_e=x({__name:"Layout",setup(l){return(c,_)=>{const o=n("el-header"),d=n("el-aside"),p=n("el-main"),a=n("el-container");return s(),i("section",se,[e(a,null,{default:t(()=>[e(o,null,{default:t(()=>[e(Y)]),_:1}),e(a,null,{default:t(()=>[e(d,{style:{"background-color":"white"},width:"250px"},{default:t(()=>[e(te)]),_:1}),e(a,null,{default:t(()=>[e(p,null,{default:t(()=>[e(ae)]),_:1})]),_:1})]),_:1})]),_:1})])}}});const re=k(_e,[["__scopeId","data-v-06d61d9b"]]);export{re as default};
