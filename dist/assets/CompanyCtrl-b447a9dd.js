import{d as h,r as V,l as k,w as x,c as B,a as l,b as i,o as D,f as y,t as $,e,g as _,E as g,z,i as H,u as N}from"./index-885010f6.js";import{i as S,j as T,g as j,k as F}from"./suer-a4f6e5f0.js";const M={class:"my-header"},R=h({__name:"CompanyEditDialog",props:{visible:{type:Boolean},company:{}},emits:["update:visible","success"],setup(C,{emit:v}){const u=C,t=v,b={name:"",address:"",manager:"",contact:""},o=V({...b}),c=k(()=>u.company);x(c,()=>{c.value?o.value={...c.value}:o.value={...b}});const n=k({get(){return u.visible},set(){t("update:visible",!1)}}),p=()=>{t("update:visible",!1)},w=async()=>{u.company?(await T({...o.value,id:c.value.id})).code==200&&(g.success("修改成功"),t("success"),t("update:visible")):(await S(o.value)).code==200&&(g.success("添加成功"),t("success"),t("update:visible"))};return(m,a)=>{const r=i("el-input"),s=i("el-form-item"),f=i("el-button"),E=i("el-form"),U=i("el-dialog");return D(),B(U,{modelValue:n.value,"onUpdate:modelValue":a[4]||(a[4]=d=>n.value=d),"show-close":!1,width:"600"},{header:l(()=>[y("div",M,$(c.value?"公司编辑":"公司添加"),1)]),default:l(()=>[y("div",null,[e(E,{"label-width":"120"},{default:l(()=>[e(s,{label:"公司名"},{default:l(()=>[e(r,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=d=>o.value.name=d)},null,8,["modelValue"])]),_:1}),e(s,{label:"地址"},{default:l(()=>[e(r,{modelValue:o.value.address,"onUpdate:modelValue":a[1]||(a[1]=d=>o.value.address=d)},null,8,["modelValue"])]),_:1}),e(s,{label:"负责人"},{default:l(()=>[e(r,{modelValue:o.value.manager,"onUpdate:modelValue":a[2]||(a[2]=d=>o.value.manager=d)},null,8,["modelValue"])]),_:1}),e(s,{label:"负责人电话"},{default:l(()=>[e(r,{modelValue:o.value.contact,"onUpdate:modelValue":a[3]||(a[3]=d=>o.value.contact=d)},null,8,["modelValue"])]),_:1}),e(s,null,{default:l(()=>[e(f,{type:"primary",onClick:w},{default:l(()=>[_("提交")]),_:1}),e(f,{type:"primary",onClick:p},{default:l(()=>[_("取消")]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue"])}}}),q={class:"user-ctrl-page"},A=y("div",{class:"page-header"},"公司管理",-1),G={class:"option-row"},K=h({__name:"CompanyCtrl",setup(C){V({username:"",name:"",phone:""});const v=V([]),u=async()=>{const n=await j();v.value=n.data};u();const t=z({visible:!1,company:null});N();const b=()=>{t.visible=!0,t.company=null},o=n=>{t.visible=!0,t.company=n},c=async n=>{(await F(n.id)).code==200&&(g.success("删除成功"),await u())};return(n,p)=>{const w=i("el-divider"),m=i("el-button"),a=i("el-table-column"),r=i("el-table");return D(),H("div",q,[A,e(w),y("div",G,[e(m,{type:"primary",onClick:b},{default:l(()=>[_("新建公司")]),_:1})]),e(r,{data:v.value,style:{width:"100%"}},{default:l(()=>[e(a,{prop:"name",label:"公司名"}),e(a,{prop:"address",width:"220",label:"地址"}),e(a,{prop:"manager",label:"负责人"}),e(a,{prop:"contact",label:"负责人电话"}),e(a,{label:"操作",width:"180"},{default:l(s=>[e(m,{size:"small",onClick:f=>o(s.row)},{default:l(()=>[_("编辑")]),_:2},1032,["onClick"]),e(m,{size:"small",type:"danger",onClick:f=>c(s.row)},{default:l(()=>[_("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(R,{visible:t.visible,"onUpdate:visible":p[0]||(p[0]=s=>t.visible=s),company:t.company,onSuccess:u},null,8,["visible","company"])])}}});export{K as default};
