import{a as y}from"./user-8ed530fc.js";import{d as x,A as U,r as c,n as k,c as B,a as t,b as n,e as C,f as s,h as N,g as E,E as u}from"./index-fd38cc11.js";const H=x({__name:"UpdatePassword",props:{visible:{type:Boolean}},emits:["update:visible"],setup(_,{emit:v}){const P=_,p=v,V=U({oldPassword:[{min:6,max:32,message:"密码长度应在6-32间"}],newPassword:[{min:6,max:32,message:"密码长度应在6-32间"}],rePassword:[{min:6,max:32,message:"密码长度应在6-32间"}]}),i=c(),w=k({get(){return P.visible},set(d){p("update:visible",d)}}),o=c({oldPassword:"",newPassword:"",rePassword:""}),b=async()=>{var d;(d=i.value)==null||d.validate(async e=>{if(e){const{oldPassword:r,newPassword:a,rePassword:m}=o.value;if(!a||!r){u.warning("密码不能为空");return}if(a!=m){u.warning("新密码两次输入不一致");return}(await y({oldPassword:r,newPassword:a})).code==200&&(u.success("修改成功"),p("update:visible",!1))}else u.warning("表单校验失败, 请检查表单")})};return(d,e)=>{const r=n("el-input"),a=n("el-form-item"),m=n("el-form"),f=n("el-button"),g=n("el-dialog");return C(),B(g,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=l=>w.value=l),title:"修改密码",width:"500"},{footer:t(()=>[s(f,{onClick:b,type:"primary"},{default:t(()=>[N("提交")]),_:1})]),default:t(()=>[E("div",null,[s(m,{ref_key:"formRef",ref:i,rules:V,"label-width":"120"},{default:t(()=>[s(a,{prop:"oldPassword",label:"旧密码"},{default:t(()=>[s(r,{modelValue:o.value.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.oldPassword=l),"show-password":"",type:"password"},null,8,["modelValue"])]),_:1}),s(a,{prop:"newPassword",label:"新密码"},{default:t(()=>[s(r,{modelValue:o.value.newPassword,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.newPassword=l),"show-password":"",type:"password"},null,8,["modelValue"])]),_:1}),s(a,{prop:"rePassword",label:"确认密码"},{default:t(()=>[s(r,{modelValue:o.value.rePassword,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.rePassword=l),"show-password":"",type:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"])])]),_:1},8,["modelValue"])}}});export{H as _};
